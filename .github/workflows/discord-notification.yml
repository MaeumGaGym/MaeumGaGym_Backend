name: Discord Notification
on:
  pull_request:
    branches: [ "main", "develop" ]
jobs:
  message:
    runs-on: ubuntu-latest
    steps:
    - name: Get Random Image URL
      id: random_image_url
      uses: actions/github-script@v3
      with:
          github-token: ${{ secrets.GITHUB_TOKEN }}
          script: |
              const urlList = [ ${{ secrets.IMAGE_URL }}, ${{ secrets.IMAGE_URL_1 }}, ${{ secrets.IMAGE_URL_2 }} ];
              core.setOutput('image_url', urlList[Math.floor(Math.random() * urlList.length)];

    - name: Discord Webhook Action
      uses: sarisia/actions-status-discord@v1
      with:
        title: 🔀 Pull Request 🔀
        description: "# 안녕하세요! 냥뇽녕냥입니다❤️"
        content: "<@&1153326597844238366>"
        webhook: ${{ secrets.DISCORD_WEBHOOK }}
        color: FFFFFF
        image: ${{ steps.random_image_url.outputs.image_url }}
